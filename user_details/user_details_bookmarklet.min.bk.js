javascript:(()=>{const iframe=document.querySelector('iframe[name="bb-base-admin-iframe"]');if(!iframe||!iframe.contentDocument){alert("âš  Go to Admin > Users > Users to run this.");return;}const doc=iframe.contentDocument,host=doc.location.origin;if(!doc.location.pathname.includes("/webapps/blackboard/execute/userManager")){alert("âš  Go to Admin > Users > Users to run this.");return;}const cache={};if(!doc.querySelector('#clearProfileInfoIcons')){const btn=doc.createElement("button");btn.id="clearProfileInfoIcons";btn.textContent="Clear Icons";Object.assign(btn.style,{position:"fixed",top:"10px",right:"10px",zIndex:"9999",background:"purple",color:"white",border:"none",padding:"6px 10px",borderRadius:"4px",fontSize:"14px"});btn.onclick=()=>{doc.querySelectorAll(".profile-info-icon").forEach(i=>i.remove());btn.remove();Object.keys(cache).forEach(k=>delete cache[k]);};doc.body.appendChild(btn);}doc.querySelectorAll("span.profileCardAvatarThumb").forEach(span=>{if(span.previousSibling?.classList?.contains("profile-info-icon"))return;const username=span.textContent.trim();if(!username)return;const icon=doc.createElement("span");icon.textContent="ðŸ›ˆ";icon.title="Hover to load user info";icon.className="profile-info-icon";Object.assign(icon.style,{cursor:"pointer",marginRight:"6px"});icon.onmouseenter=()=>{if(cache[username]){icon.title=cache[username];return;}icon.title="Loading...";const apiUrl=`${host}/learn/api/public/v1/users/userName:${encodeURIComponent(username)}?fields=externalId,lastLogin`;fetch(apiUrl).then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.json();}).then(data=>{const date=data.lastLogin?new Date(data.lastLogin).toLocaleString():"N/A",info=`External ID: ${data.externalId||"N/A"}\nLast Login: ${date}`;icon.title=info;cache[username]=info;}).catch(e=>{icon.title="Error fetching user info";console.error("Fetch error:",e);});};span.parentElement.insertBefore(icon,span);});})();
