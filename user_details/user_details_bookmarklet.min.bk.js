javascript:(()=>{const e=document.querySelector('iframe[name="bb-base-admin-iframe"]');if(!e||!e.contentDocument)return alert("âš  Go to Admin > Users > Users to run this.");const t=e.contentDocument,n=t.location.origin;if(!t.location.pathname.includes("/webapps/blackboard/execute/userManager"))return alert("âš  Go to Admin > Users > Users to run this.");const o={},a="clearProfileInfoIcons";if(!t.querySelector(`#${a}`)){const e=t.createElement("button");e.id=a,e.textContent="Clear Icons",Object.assign(e.style,{position:"fixed",top:"10px",right:"10px",zIndex:"9999",background:"purple",color:"white",border:"none",padding:"6px 10px",borderRadius:"4px",fontSize:"14px"}),e.onclick=()=>{t.querySelectorAll(".profile-info-icon").forEach(e=>e.remove()),e.remove(),Object.keys(o).forEach(e=>delete o[e])},t.body.appendChild(e)}t.querySelectorAll("span.profileCardAvatarThumb").forEach(e=>{if(e.previousSibling?.classList?.contains("profile-info-icon"))return;const a=e.textContent.trim();if(!a)return;const r=t.createElement("span");r.textContent="ðŸ›ˆ",r.title="Hover to load user info",r.className="profile-info-icon",Object.assign(r.style,{cursor:"pointer",marginRight:"6px"}),r.onmouseenter=()=>{if(o[a])return void(r.title=o[a]);r.title="Loading...";const i=`${n}/learn/api/public/v1/users/userName:${encodeURIComponent(a)}?fields=id,externalId,studentId,name,contact,institutionRoleIds,systemRoleIds,created,lastLogin,uuid`;fetch(i).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.json()}).then(e=>{const t=e.userName||"N/A",n=e.id||"N/A",i=e.uuid||"N/A",c=e.externalId||"N/A",l=e.studentId||"N/A",s=e.name?(e.name.given||"")+" "+(e.name.family||""):"N/A",d=e.contact?.email||"N/A",u=e.contact?.institutionEmail||"N/A",f=e.institutionRoleIds?.join(", ")||"N/A",m=e.systemRoleIds?.join(", ")||"N/A",p=e.created?new Date(e.created).toLocaleString():"N/A",h=e.lastLogin?new Date(e.lastLogin).toLocaleString():"N/A",g="Username: "+t+"\nExternal ID: "+c+"\nPrimary Key: "+n+"\nStudent ID: "+l+"\nFull Name: "+s+"\nEmail: "+d+"\nInstitution Email: "+u+"\nInstitution Roles: "+f+"\nSystem Roles: "+m+"\nCreated: "+p+"\nLast Login: "+h+"\nUUID: "+i;r.title=g,o[a]=g}).catch(e=>{r.title="Error fetching user info",console.error("Fetch error:",e)})},r.onclick=()=>{r.title&&"Hover to load user info"!==r.title&&"Loading..."!==r.title&&navigator.clipboard.writeText(r.title).then(()=>{r.textContent="âœ…",setTimeout(()=>r.textContent="ðŸ›ˆ",1e3)}).catch(e=>{console.error("Clipboard error:",e),alert("Failed to copy to clipboard.")})},e.parentElement.insertBefore(r,e)})})();
